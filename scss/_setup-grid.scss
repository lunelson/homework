//             _     _
//            (_)   | |
//   __ _ _ __ _  __| |
//  / _` | '__| |/ _` |
// | (_| | |  | | (_| |
//  \__, |_|  |_|\__,_|
//   __/ |
//  |___/

// grid, flow, cols, rows

// TODO / THINK
// - replace --col-base, --row-base with --col-count, --row-count
// - reconsider grid-template-rows value for 'grid' base class?


@mixin homework-setup-grid($max-columns: max-columns(), $row-classes: false) {

  *, *:before, *:after {
    --push-l: initial;
    --push-r: initial;
  }

  :root {
    --row-gap: var(--inner-y);
    --col-gap: var(--inner-x);
    --col-base: var(--grid-cols);
    --col-span: var(--col-base);
    --row-span: var(--grid-rows, 1);
  }

  // global bases and mods
  // flow, grid

  #{base-class('flow')} {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    width: calc(100% + var(--col-gap)) !important;;
    margin-left: calc(var(--col-gap) / -2);
    margin-right: calc(var(--col-gap) / -2);
    margin-top: calc(var(--row-gap) / -2);
    margin-bottom: calc(var(--row-gap) / -2);
    & > * {
      flex: 0 0 auto;
      width: 100%;
      min-width: 0%; // https://css-tricks.com/flexbox-truncated-text/
      min-height: 1px;
      background-clip: content-box;
      padding-left: calc(var(--col-gap) / 2) !important;
      padding-right: calc(var(--col-gap) / 2) !important;
      padding-top: calc(var(--row-gap) / 2) !important;
      padding-bottom: calc(var(--row-gap) / 2) !important;
    }
  }

  #{base-class('grid')} {
    display: grid;
    grid-gap: var(--row-gap) var(--col-gap);
    grid-template-rows: repeat(var(--row-span), 1fr); // could be 0% instead of auto ?
    grid-template-columns: repeat(var(--col-span), minmax(0%, 1fr)); // ~= 'min-width: 0%' rule for flex flow...
    & > * {
      // grid-column: auto / auto;
      // grid-row: auto / auto;
      grid-column: span var(--col-span) / span var(--col-span);
      grid-row: span var(--row-span) / span var(--row-span);
    }
  }

  @each $y in map-keys(inner-y-mods()) { .flow-#{$y}, .grid-#{$y} { --row-gap: var(--inner-y-#{$y}); } }
  @each $x in map-keys(inner-x-mods()) { .flow-x-#{$x}, .grid-x-#{$x} { --col-gap: var(--inner-x-#{$x}); } }

  .flow-0, .grid-0 { --row-gap: 0; }
  .flow-x-0, .grid-x-0 { --col-gap: 0; }
  .flow-0-0, .grid-0-0 { --row-gap: 0; --col-gap: 0; }

}
